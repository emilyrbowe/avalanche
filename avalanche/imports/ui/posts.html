<template name="post">
	<div class="post">
		{{#if equals resource_type "video"}}
			<a class="poster-link" href="/posts/{{_id}}" >
				<video src="http://res.cloudinary.com/jbakse/video/upload/w_250/{{poster}}.mp4" autoplay=true loop=true></video>
			</a>
		{{else}}
			<a class="poster-link" href="/posts/{{_id}}" >
				<img src="{{c.url poster width=250 crop='fill' quality=90}}" alt="" />
			</a>
		{{/if}}

		<div class="info">
			<!-- <button class="btn btn-default remove-post">
				<i class="fa fa-trash" aria-hidden="true"></i>
			</button> -->

			<div class="inspiration">
				{{#if inspiration_url}}
					<span class="">Inspired by: </span>
					<a href="{{inspiration_url}}">{{inspiration_name}}</a>
				{{/if}}
			</div>

			<div class="author">
				{{author}}
			</div>

			<div class="date">
				{{formatDate post.created_at}}, {{formatTime post.created_at}}
			</div>


			<!-- {{i}} -->

		</div>
	</div>
</template>



<template name="create_post_form">
	<div id="create-post-form" class="overlay">
		<div class="overlay-content">
			<div class="title-bar">Post a Sketch </div>

			<!-- hidden for now -->
			<!-- {{creating_post}} -->

			<div class="poster-wrap">
				<img src="{{c.url post.poster height=250 crop='fill' quality=90}}" alt="" />
			</div>


			<label for="upload-file" class="button">
				<div class="upload-file-container">
					<i class="fa fa-cloud-upload fa-lg" aria-hidden="true"></i>
					<div class="drag-drop-browse">Drag files here or <span class="browse">browse</span> </div>
				</div>
			</label>


			<input class="upload-file hidden" id="upload-file" name="upload-file" type="file">

			<div class="content">




				<script>
				(function() {
					[].slice.call( document.querySelectorAll( '#create-post-form select.cs-select' ) ).forEach( function(el) {
						new SelectFx(el);
					} );
				})();
				</script>

				{{#autoForm collection="Posts" doc=post id="updatePostForm" type="update"}}

					{{> afQuickField name='lesson' options=lessons}}
				<div class="inspiration inspiration_name">{{> afQuickField name='inspiration_name' placeholder='Inspiration Name'}} </div>
				<div class="inspiration inspiration_url">	{{> afQuickField name='inspiration_url' placeholder='Paste URL here'}} </div>
				<div class="inspiration inspiration-button"> + </div>
				{{> afQuickField name='description' rows=6 placeholder='Description'}}

				<div class="submit-cancel-container">
					<button type="button" class="cancel btn">Cancel</button>
					<button type="submit" class="submit btn btn-primary">Post</button>

				</div>
				{{/autoForm}}

			</div>

		</div>
	</div>
</template>


<template name="post_overlay">
	<div id="post-overlay" class="overlay">
		<div class="overlay-content">

			<div class="name-value">
				<span class="name">Author</span>
				<span class="value"><a href="/users/{{post.author_id}}">{{post.author}}</a></span>
			</div>
			<div class="name-value">
				<span class="name">Posted</span>
				<span class="value">{{formatDate post.created_at}}, {{formatTime post.created_at}}</span>
			</div>

			{{#if equals post.resource_type "video"}}
				<video src="http://res.cloudinary.com/jbakse/video/upload/{{post.poster}}.mp4" controls=true autoplay=true loop=true></video>
			{{else}}
				<img class="poster" src="{{c.url post.poster}}" alt="" />
			{{/if}}

		</div>



	</div>
</template>
